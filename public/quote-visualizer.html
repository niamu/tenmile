<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>format preview</title>
    <script src="lib/jszip-3.6.0.min.js"></script>
    <script src="lib/pako-2.0.3.min.js"></script>
    <script src="lib/UPNG-2.2.0.js"></script>
    <script src="lib/msgpack-1.0.3.js"></script>
    <script src="js/quotes.js"></script>
    <style></style>
  </head>
  <body>
    Hello world
    <div id="images" style="border: solid black;">
    </div>
  </body>
  <script defer>
    "use strict";

    window.gtag = function() {};

    let quoteUrl = "https://tenmile.s3.amazonaws.com/ZELDA-ed42-67fdbb51.png";

    async function urlToQuote(url) {
      let file = await fetch(url);
      let buffer = await file.arrayBuffer();
      console.log(buffer);
      let quote = await loadQuote(buffer);
      return quote;
    }
    
    let quote = null;
    let dta = null;
    
    window.onload = async function runAllTests() {
      quote = await urlToQuote(quoteUrl);
      console.log("Ready");
      
      let white = new Uint8Array(200 * 300 * 4);
      dta = white.map(x => 255);
      let png = UPNG.encode([dta], 200, 300, 0);
      let blob = new Blob([png], { type: "image/png" });

      let img = document.createElement("img");
      img.src = URL.createObjectURL(blob);

        document.getElementById("images").appendChild(img);

      // images.appendChild(img);
    };
  </script>
</html>
